{"mappings":";;;;;;;;;;;;;;;;;;;;;;;AGAA,yBAAc,GAAG,IAAI,CAAC,KAAK,CAAC,CAA4D;;;ADCxF,yBAAc,GAAG,CAAC;IAChB,CAAO,QAAE,yBAAM;AACjB,CAAC;;;;;;;;;;AEHD,GAAuC;AACvC,GAA8C;AAC9C,GAAmD;AACnD,GAAiD;AAHjD,yCAAuC,GAAG,CAA+B;AACzE,yCAA8C,GAAG,CAAsC;AACvF,yCAAmD,GAAG,CAA2C;AACjG,yCAAiD,GAAG,CAAyC;;;;;;;;;SHwBpF,kCAAY,CAAC,KAAgC,EAAE,GAA8B,EAAE,CAAC;IACvF,KAAK,GAAG,uBAAgB,CAAC,KAAK;IAC9B,KAAK,GAAG,mBAAY,CAAC,KAAK;IAC1B,GAAG,CAAC,aAAa,GAAG,0BAAmB,CAAC,gEAAY;IACpD,GAAG,CAAC,CAAC,aAAA,UAAU,EAAA,CAAC,GAAG,oBAAa,CAAC,KAAK;IACtC,GAAG,CAAC,CAAC,WACH,QAAQ,eACR,UAAU,eACV,UAAU,UACV,KAAK,EACP,CAAC,GAAG,KAAK;IAET,GAAG,CAAC,gBAAgB,GAAG,aAAa,CAAC,CAAQ;IAC7C,EAAE,GAAG,KAAK,KAAK,KAAK,CAAC,CAAY,iBAAM,KAAK,CAAC,CAAiB,mBAC5D,KAAK,CAAC,CAAY,eAAI,gBAAgB;IAExC,EAA6C,AAA7C,2CAA6C;IAC7C,GAAG,CAAC,CAAC,aAAA,UAAU,eAAE,UAAU,EAAA,CAAC,GAAG,eAAQ,CAAC,KAAK;IAE7C,EAAmJ,AAAnJ,mJAAmJ;IACnJ,EAAuC,AAAvC,qCAAuC;IACvC,GAAG,CAAC,UAAU,GAAG,UAAU,CAAC,CAAiB,sBAAM,UAAU,CAAC,CAAY,iBAAM,gBAAgB,GAAG,UAAU,CAAC,EAAE,GAAG,CAAE;IACrH,GAAG,CAAC,QAAQ,GAAG,YAAK;IAEpB,GAAG,CAAC,MAAM,GAAG,sBAAe,CAAC,GAAG;IAChC,GAAG,CAAC,QAAQ,GAAG,aAAM;IAErB,EAAkE,AAAlE,gEAAkE;IAClE,GAAG,EAAE,SAAS,EAAE,YAAY,IAAI,eAAQ,CAAC,IAAI;IAC7C,GAAG,CAAC,CAAC,QAAA,KAAK,EAAA,CAAC,GAAG,kBAAW;IAEzB,GAAG,CAAC,QAAQ,GAAG,kBAAW,KAAO,CAAC;QAChC,GAAG,CAAC,cAAc,KAAK,KAAK;QAC5B,GAAG,CAAC,KAAK,GAAG,cAAc,GAAG,QAAQ,CAAC,OAAO,EAAE,WAAW,GAAG,MAAM,CAAC,OAAO,EAAE,WAAW;QAExF,EAAE,GAAG,KAAK,CAAC,KAAK,GACd,YAAY,CAAC,KAAK;IAEtB,CAAC,EAAE,CAAC;QAAA,QAAQ;QAAE,MAAM;QAAE,YAAY;QAAE,KAAK;IAAA,CAAC;IAE1C,wBAAiB,CAAC,CAAC;QACjB,GAAG,EAAE,MAAM;QACX,QAAQ,EAAE,QAAQ;IACpB,CAAC;IAED,sBAAe,CAAC,QAAQ,EAAE,CAAC;QAAA,KAAK;QAAE,QAAQ;IAAA,CAAC;IAE3C,GAAG,CAAC,iBAAiB,GAAG,CAAC;oBACvB,UAAU;oBACV,UAAU;QACV,KAAK,EAAE,IAAI;QACX,OAAO,EAAE,KAAK;QACd,eAAe,EAAE,IAAI;QACrB,WAAW,EAAE,IAAI;QACjB,YAAY,EAAE,IAAI;QAClB,gBAAgB,EAAE,IAAI;QACtB,iBAAiB,EAAE,IAAI;QACvB,CAAY,aAAE,IAAI;IACpB,CAAC;IAED,GAAG,CAAC,oBAAoB,GAAG,iBAAU,CAAC,gEAAM,EAAE,CAAmC;IACjF,GAAG,CAAC,eAAe,GAAG,iBAAU,CAAC,gEAAM,EAAE,CAA8B;IAEvE,GAAG,CAAC,KAAK,GAAG,CAAC;QACX,WAAW,EAAE,CAAC;eACT,iBAAiB;YACpB,gBAAgB,EAAE,oBAAoB;YACtC,EAAgK,AAAhK,8JAAgK;YAChK,CAAiB,qBAAK,UAAU,CAAC,CAAC,EAAE,QAAQ,CAAC,CAAC,EAAE,QAAQ,CAAC,MAAM;YAC/D,EAAgG,AAAhG,8FAAgG;YAChG,EAAE,EAAE,KAAK,IAAI,UAAU,CAAC,EAAE;QAC5B,CAAC;QACD,MAAM,EAAE,CAAC;eACJ,iBAAiB;YACpB,EAAE,EAAE,QAAQ;YACZ,gBAAgB,EAAE,eAAe;uBACjC,SAAS;YACT,KAAK,EAAE,CAAK;YACZ,CAAY,aAAE,aAAa,CAAC,CAAc;YAC1C,CAAiB,qBAAK,UAAU,CAAC,CAAC,EAAE,QAAQ;QAC9C,CAAC;IACH,CAAC;IAED,EAAE,EAAE,KAAK,EACP,EAAgG,AAAhG,8FAAgG;IAChG,MAAM,CAAC,UAAU,CAAC,EAAE;IAGtB,MAAM,0CACH,YAAK;WACA,KAAK;QACT,UAAU,EAAE,UAAU;QACtB,GAAG,EAAE,MAAM;QACX,gBAAgB,EAAE,iBAAU,CAC1B,gEAAM,EACN,CAAiC;gDAElC,CAAG;WACE,UAAU;QACd,IAAI,EAAC,CAAO;QACZ,SAAS,EAAE,iBAAU,CAAC,gEAAM,EAAE,CAAuB,wBAAE,UAAU,CAAC,SAAS;QAC3E,GAAG,EAAE,QAAQ;gDACZ,mBAAY;QAAC,KAAK,EAAE,KAAK;OACvB,QAAQ;AAKnB,CAAC;AAED,EAEG,AAFH;;CAEG,AAFH,EAEG,CACH,KAAK,CAAC,wCAAa,iBAAG,YAAK,CAAC,UAAU,CAAC,kCAAY","sources":["packages/@react-spectrum/searchwithin/src/index.ts","packages/@react-spectrum/searchwithin/src/SearchWithin.tsx","packages/@react-spectrum/searchwithin/intl/*.js","packages/@react-spectrum/searchwithin/intl/en-US.json","packages/@adobe/spectrum-css-temp/components/searchwithin/vars.css"],"sourcesContent":["/*\n * Copyright 2020 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */\n\n/// <reference types=\"css-module-types\" />\n\nexport * from './SearchWithin';\n","/*\n * Copyright 2020 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */\n\nimport {classNames, SlotProvider, useFocusableRef, useResizeObserver, useStyleProps} from '@react-spectrum/utils';\nimport {Field} from '@react-spectrum/label';\nimport {FocusableRef} from '@react-types/shared';\n// @ts-ignore\nimport intlMessages from '../intl/*.json';\nimport React, {useCallback, useRef, useState} from 'react';\nimport {SpectrumSearchWithinProps} from '@react-types/searchwithin';\nimport styles from '@adobe/spectrum-css-temp/components/searchwithin/vars.css';\nimport {useFormProps} from '@react-spectrum/form';\nimport {useId} from '@react-aria/utils';\nimport {useLabel} from '@react-aria/label';\nimport {useLayoutEffect} from '@react-aria/utils';\nimport {useMessageFormatter} from '@react-aria/i18n';\nimport {useProvider, useProviderProps} from '@react-spectrum/provider';\n\nfunction SearchWithin(props: SpectrumSearchWithinProps, ref: FocusableRef<HTMLElement>) {\n  props = useProviderProps(props);\n  props = useFormProps(props);\n  let formatMessage = useMessageFormatter(intlMessages);\n  let {styleProps} = useStyleProps(props);\n  let {\n    children,\n    isDisabled,\n    isRequired,\n    label\n  } = props;\n\n  let defaultAriaLabel = formatMessage('search');\n  if (!label && !props['aria-label'] && !props['aria-labelledby']) {\n    props['aria-label'] = defaultAriaLabel;\n  }\n  // Get label and group props (aka fieldProps)\n  let {labelProps, fieldProps} = useLabel(props);\n\n  // Grab aria-labelledby for the search input. Will need the entire concatenated aria-labelledby if it exists since pointing at the group id doesnâ€™t\n  // suffice if there is a external label\n  let labelledBy = fieldProps['aria-labelledby'] || (fieldProps['aria-label'] !== defaultAriaLabel ? fieldProps.id : '');\n  let pickerId = useId();\n\n  let domRef = useFocusableRef(ref);\n  let groupRef = useRef<HTMLDivElement>();\n\n  // Measure the width of the field to inform the width of the menu.\n  let [menuWidth, setMenuWidth] = useState(null);\n  let {scale} = useProvider();\n\n  let onResize = useCallback(() => {\n    let shouldUseGroup = !!label;\n    let width = shouldUseGroup ? groupRef.current?.offsetWidth : domRef.current?.offsetWidth;\n\n    if (!isNaN(width)) {\n      setMenuWidth(width);\n    }\n  }, [groupRef, domRef, setMenuWidth, label]);\n\n  useResizeObserver({\n    ref: domRef,\n    onResize: onResize\n  });\n\n  useLayoutEffect(onResize, [scale, onResize]);\n\n  let defaultSlotValues = {\n    isDisabled,\n    isRequired,\n    label: null,\n    isQuiet: false,\n    validationState: null,\n    description: null,\n    errorMessage: null,\n    descriptionProps: null,\n    errorMessageProps: null,\n    'aria-label': null\n  };\n\n  let searchFieldClassName = classNames(styles, 'spectrum-SearchWithin-searchfield');\n  let pickerClassName = classNames(styles, 'spectrum-SearchWithin-picker');\n\n  let slots = {\n    searchfield: {\n      ...defaultSlotValues,\n      UNSAFE_className: searchFieldClassName,\n      // Apply aria-labelledby of group or the group id to searchfield. No need to pass the group id (we want a new one) and aria-label (aria-labelledby will suffice)\n      'aria-labelledby': `${labelledBy} ${pickerId} ${pickerId}-value`,\n      // When label is provided, input should have id referenced by htmlFor of label, instead of group\n      id: label && fieldProps.id\n    },\n    picker: {\n      ...defaultSlotValues,\n      id: pickerId,\n      UNSAFE_className: pickerClassName,\n      menuWidth,\n      align: 'end',\n      'aria-label': formatMessage('searchWithin'),\n      'aria-labelledby': `${labelledBy} ${pickerId}`\n    }\n  };\n\n  if (label) {\n    // When label is provided, input should have id referenced by htmlFor of label, instead of group\n    delete fieldProps.id;\n  }\n\n  return (\n    <Field\n      {...props}\n      labelProps={labelProps}\n      ref={domRef}\n      wrapperClassName={classNames(\n        styles,\n        'spectrum-SearchWithin-container'\n      )}>\n      <div\n        {...fieldProps}\n        role=\"group\"\n        className={classNames(styles, 'spectrum-SearchWithin', styleProps.className)}\n        ref={groupRef}>\n        <SlotProvider slots={slots}>\n          {children}\n        </SlotProvider>\n      </div>\n    </Field>\n  );\n}\n\n/**\n * A SearchWithin combines a SearchField and a Picker into a single group. This allows a user to constrain the scope of their search to a particular category, for example.\n */\nconst _SearchWithin = React.forwardRef(SearchWithin);\nexport {_SearchWithin as SearchWithin};\n","const _temp0 = require(\"./en-US.json\");\nmodule.exports = {\n  \"en-US\": _temp0\n}","{\n    \"search\": \"Search\",\n    \"searchWithin\": \"Search within\"\n}\n","/*\n * Copyright 2020 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */\n\n@import './index.css';\n"],"names":[],"version":3,"file":"module.js.map"}